<template>
  <div class="posts-section">
    <div v-for="post in posts" :key="post.id" class="post-card">
      <div class="post-header">
        <span class="category-badge">{{ post.category }}</span>
        <span class="post-date">{{ post.date }}</span>
      </div>
      <h3 class="post-title">{{ post.title }}</h3>
      <p class="post-preview">{{ post.content }}</p>
      <div class="post-stats">
        <span>ğŸ‘ï¸ {{ post.views }}</span>
        <span>ğŸ’¬ {{ post.comments }}</span>
        <span>â¤ï¸ {{ post.likes }}</span>
      </div>
      <div class="post-actions">
        <button class="btn-detail" type="button" @click="emit('action', { type: 'detail', post })">
          ìƒì„¸ë³´ê¸°
        </button>
        <button class="btn-edit" type="button" @click="emit('action', { type: 'edit', post })">
          ìˆ˜ì •
        </button>
        <button class="btn-delete" type="button" @click="emit('action', { type: 'delete', post })">
          ì‚­ì œ
        </button>
      </div>
    </div>

    <div v-if="posts.length === 0" class="empty-state">
      <p>ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤</p>
      <button class="btn-create" type="button" @click="emit('action', { type: 'create' })">
        ê¸€ ì‘ì„±í•˜ê¸°
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
import type { MyPost, PostActionPayload } from '@/views/posts/constants'

defineProps<{ posts: MyPost[] }>()

const emit = defineEmits<{ (e: 'action', payload: PostActionPayload): void }>()
</script>
