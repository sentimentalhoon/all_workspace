FROM eclipse-temurin:21-jdk-alpine

WORKDIR /app

# Gradle wrapper 복사
COPY gradle/ gradle/
COPY gradlew build.gradle.kts settings.gradle.kts gradle.properties ./

# 의존성 다운로드 (캐싱)
RUN ./gradlew dependencies --no-daemon

# 소스 코드 복사
COPY src ./src

# 개발 모드로 실행
CMD ["./gradlew", "run", "--no-daemon"]
